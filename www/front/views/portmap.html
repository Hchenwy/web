<div class="mainpage_bgc">
    <div class="overview_mainPageType">
        <div class="mainpage_head">
            <img src="assets/images/portmap.png" class="floatLeft" style="margin-left: 30px">

            <div class="mainpage_name">网络服务</div>
            <div class="mainpage_ename">Network&nbsp;Service</div>
        </div>
        <div class="vlineShow"></div>
        <div class="tabbable tabbable-custom tabbable-full-width" class="marginTop20">
            <ul class="nav nav-tabs" style="margin-right: -20px;margin-left: 25px">
                <li id="portmap_tab" class="active">
                    <a href="#portmapPage" data-toggle="tab">端口映射</a>
                </li>
                <li id="dmz_tab" style="display: none">
                    <a href="#dmzPage" data-toggle="tab">DMZ</a>
                </li>
                <li id="dns_tab" style="display: none">
                    <a href="#ddnsPage" data-toggle="tab">花生壳</a>
                </li>
            </ul>
            <div class="tab-content pageSizeSet" style="height: 100%;overflow-y:auto">
                <div id="portmapPage" class="tab-pane active overflow1200">
                    <div class="pageSizeSet1">
                        <input type="button" class="btn btn-primary"
                               value="添加规则" ng-click="portmapAdd()"><input type="button" class="btn btn-danger marginLeft10"
                                                                         value="删除选中" ng-click="delPortmap();">
                        <div style="float: right;padding:12px 12px">
                            <div class="floatLeft">
                                <label><font class="title">基于"内网IP"地址查询</font></label>
                            </div>
                            <div style="margin-left: 30px;float: left">
                                <input class="inputSize width185 form-control" type="text" ng-change="selectIp()"
                                       ng-model="selectValue">
                            </div>
                        </div>
                    </div>
                    <div id="bridgePage">
                        <div style="margin-right: 40px" class="pageSizeSet">
                            <div id="portmapTab"></div>
                        </div>
                    </div>
                </div>
                <div id="dmzPage" class="tab-pane overflow1200">
                    <form id="dmzSub" name="dmzSub" class="form-horizontal form-validation">
                        <div class="marginTop15">
                            <div class="floatLeft">
                                <font class="title">启用</font>
                            </div>
                            <div style="margin-left: 10px;float: left" >
                                <div id="div3" class="close1">
                                    <div id="div4" class="close2"></div>
                                </div>
                            </div>
                        </div>
                        <div class="clear"></div>
                        <div id="dmzForm" ng-hide="!dmz.enable">
                            <div class="marginTop15">
                                <font class="title">内网地址</font>
                                <input class="inputSize floatLeft width185 form-control" type="text" ng-model="dmz.ip" placeholder="请输入内网IP" ng-pattern="/^(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))$/" ng-disabled="!dmz.enable"><span class="friendlyMsg">如：192.168.1.100</span>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div style="margin-top: 20px;margin-left: 190px">
                            <input type="button" class="btnheight btn btn-primary" ng-disabled="ddnsSub.$invalid" ng-click="conf_set('dmz')" value="保存">
                        </div>
                    </form>
                </div>
                <div id="ddnsPage" class="tab-pane overflow1200">
                    <form id="ddnsSub" name="ddnsSub" class="form-horizontal form-validation">
                        <div class="marginTop15">
                            <div class="floatLeft">
                                <font class="title">启用</font>
                            </div>
                            <div style="margin-left: 10px;float: left" >
                                <div id="div1" class="close1">
                                    <div id="div2" class="close2"></div>
                                </div>
                            </div><span class="friendlyMsg marginLeft10">当前仅支持<a href="http://www.oray.com" target="_blank">花生壳</a>动态域名，且在使用拨号上网时有效</span>
                        </div>
                        <div class="clear"></div>
                        <div id="ddnsForm" ng-hide="!ddns.enable">
                            <div class="marginTop15">
                                <font class="title">域名</font>
                                <input class="inputSize floatLeft width185 form-control" type="text" name="host" ng-model="ddns.host" placeholder="请输入已注册的域名" ng-disabled="!ddns.enable" required><span class="friendlyMsg">如果当前还没有域名或账号，请先到<a href="http://www.oray.com" target="_blank">花生壳</a>官网注册</span>
                            </div>
                            <div class="clear"></div>
                            <div class="marginTop15">
                                <font class="title">用户名</font>
                                <input class="inputSize floatLeft  width185 form-control" type="text" name="username" ng-model="ddns.username" placeholder="请输入花生壳账号" ng-disabled="!ddns.enable" required>
                            </div>
                            <div class="clear"></div>
                            <div class="marginTop15">
                                <font class="title">密码</font>
                                <input class="inputSize floatLeft width185 form-control" type="password" name="password" ng-model="ddns.password" placeholder="请输入花生壳密码" ng-disabled="!ddns.enable" required>
                            </div>
                            <div class="clear"></div>
                            <div class="marginTop15">
                                <font class="title">可选的物理口</font>
                                <select class="inputSize form-control select110" ng-model="ddns.interface" name="interface" ng-disabled="!ddns.enable" required>
                                    <option ng-repeat="data in ddns.wans" value="{{data.value}}">{{data.name}}</option>
                                </select>
                            </div>
                            <div class="clear"></div>
                            <div class="marginTop15">
                                <font class="title">状态</font>
                                <span class="inputSize floatLeft width185">{{ddns.status}}</span>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div style="margin-top: 20px;margin-left: 190px">
                            <input type="submit" class="btnheight btn btn-primary" ng-disabled="ddnsSub.$invalid" id="resetSn_btn" ng-click="conf_set('ddns')" value="保存">
                        </div>
                    </form>
                </div>
                <div class="vlineShow clear"></div>
                <div class="foot" id="footPage"
                     style="display:-webkit-flex;justify-content:center;align-items:center;">
                    <font style="color: #abc;font-size: 12px">Copyright 2016-2019 任子行网络技术股份有限公司</font>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal modal-white" id="portmap_dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
     data-backdrop="static">
    <div class="modal-dialog">
        <div class="modal-content" style="width: 700px">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="get_conf()">&times;</button>
                <h4 class="modal-title ng-binding">端口映射规则编辑</h4>
            </div>
            <div class="modal-body clearfix">
                <form id="portmapForm" name="portmapForm" class="form-horizontal form-validation">
                    <div class="marginTop20">
                        <font class="title">映射关系</font>
                        <select class="interfaceInput  select185 form-control" name="type" ng-model="portmapData.type" ng-change="typeChange(portmapData.type)" ng-disabled="natSelect" required>
                            <option value="nat">端口映射</option>
                            <option value="dmz">整机映射(DMZ主机)</option>
                        </select>
                    </div>
                    <div class="clear"></div>
                    <div class="marginTop20">
                        <font class="title">内网IP</font>
                        <input class="interfaceInput  width185 form-control" name="lan_ip" ng-model="portmapData.lan_ip" placeholder="192.168.1.1" ng-pattern="/^(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))$/" required>
                    </div>
                    <div class="clear"></div>
                    <div class="marginTop20">
                        <font class="title">接口</font>
                        <select class="interfaceInput form-control select110" name="wan_net" ng-model="portmapData.wan_net" required>
                            <option ng-repeat="data in interfaceData" value="{{data.name}}">{{data.value}}</option>
                        </select>
                    </div>
                </form>
                <form id="portmapForm2" name="portmapForm2" class="form-horizontal form-validation">
                    <div class="clear"></div>
                    <div class="marginTop20" ng-hide="nat">
                        <font class="title">内网端口</font>
                        <input class="interfaceInput  width185 form-control" name="lan_port" ng-disabled="nat" ng-model="portmapData.lan_port" placeholder="80" type="number" required>
                    </div>
                    <div class="clear"></div>
                    <div class="marginTop20" ng-hide="nat">
                        <font class="title">外网端口</font>
                        <input class="interfaceInput  width185 form-control" name="wan_port" ng-disabled="nat" ng-model="portmapData.wan_port" placeholder="8080" type="number" required>
                    </div>
                    <div class="clear"></div>
                    <div class="marginTop20" ng-hide="nat">
                        <font class="title">协议类型</font>
                        <select class="interfaceInput form-control select110" name="protocol" ng-disabled="nat" ng-model="portmapData.protocol" required>
                            <option value="tcp">TCP</option>
                            <option value="udp">UDP</option>
                            <option value="tcp+udp">TCP+UDP</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="submit" ng-hide="!nat" class="btnheight btn btn-primary" ng-disabled="portmapForm.$invalid" ng-click="conf_set('portmap')">确定</button>
                <button type="submit" ng-hide="nat" class="btnheight btn btn-primary" ng-disabled="portmapForm.$invalid||portmapForm2.$invalid" ng-click="conf_set('portmap')">确定</button>
                <button type="button" class="btnheight btn btn-danger" data-dismiss="modal" ng-click="get_conf()">取消
                </button>
            </div>
        </div>
    </div>
</div>

